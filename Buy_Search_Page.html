<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cabbage Friends</title>
	
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Favicons -->
  <link href="img/favicon.png" rel="icon">
  <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">
    
  <!-- Firebase setting -->
      <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyCiAhAXTdVzymNXtsvvZGCuMSVj_lZWR-E",
      authDomain: "projectx-cabbagefriends.firebaseapp.com",
      databaseURL: "https://projectx-cabbagefriends.firebaseio.com",
      projectId: "projectx-cabbagefriends",
      storageBucket: "projectx-cabbagefriends.appspot.com",
      messagingSenderId: "219900775267"
    };
    firebase.initializeApp(config);
  </script>
    
  <!--js query import for number spinners-->
	<script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/number.css">
	<script src="./js/number.js"></script>
    <script>
        $('input').number({
          'containerClass' : 'number-style',
          'minus' : 'number-minus',
          'plus' : 'number-plus',
          'containerTag' : 'div',
          'btnTag' : 'span'
        });
        
    </script>
    <style>
/*
        #barName{
            font: 40pt;
        }
*/
        .search-container {
            text-align: center;
            
        }
            input[type=text] {
                padding: 10px;
                margin-top: 30px;
                margin-bottom: 30px;
                font-size: 25px;
                border: solid 6px lightgray;
                width: 500px;
                height: 68px;
                border-radius: 3px;
            }
            .search-container button {
              background: lightgray;
              border: none;
              cursor: pointer;
                margin-top: 30px;
                margin-bottom: 30px;
                padding:0px;
                border: solid 7px lightgray;
                display:inline;
                transform:translate(0,-5px);
                border-radius: 5px;
            }
            .search-container button img{
                height:54px;
                width: auto;
                padding:0px;
        }
        .map {
            margin:30px;
            
        }
            
        .item-container {
            margin-left: 100px;
            margin-right: 300px;
        }

        .item-container > div {
            background-color: #f1f1f1;
            margin: 20px;
            text-align: center;
            font-size: 30px;
            width: calc(100%-40px);
            height: 200px;
            border-radius: 10px;
        }
        .serched_item_box{
            display:grid;
            grid-gap:20px;
            grid-template-columns: 260px 1fr 100px;
        }
        .searched_item_info{
            display:grid;
            grid-gap: 5px;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            text-align: left;
        }
        .searched_item_info > div {
            margin: 10px;
        }
        .searched_item_img{
            display:inline;
            height: auto;
            width: auto;
        }
        .searched_item_img > img {
            text-align: center;
            height: 200px;
            width: 260px;
            float: left;
        }
        .quantity_bar {
            padding: 10px;
        }
        .buy_container {
            margin: 50px;
        }
        .buy_container form {
            text-align: center;
        }
        .buy_container form > div {
            display:inline-block;
            text-align: center;
            width: 180px;
            height: 70px;
            border-radius: 10px;
            background-color: black;
            color: white;
            font-size: 20pt;
            vertical-align: bottom;
            margin-left: 20px;
        }
        .buy_container form div a div{
            transform: translate(0, 15px);
        }        
        .buy_container #buy_summary {
            margin-left: auto;
            margin-right: auto;
            width: 30%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            text-align: center;
        }
      
        .buy_button {
            width: 180px;
            height: 70px;
            border-radius: 10px;
            background-color: black;
            color: white;
            font-size: 20pt;
            text-align: center;
        }
        .searched_item_img img {
            border-radius: 10px;
        }
        
        #buy_summary p {
            display: inline;
            font-size: 20pt;
            font-weight: bold;
        }
        
    </style>
</head>

<body>

  <!-- Static navbar -->
  <div class="navbar navbar-inverse navbar-static-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><p id="barName"> Cabbage Friends</p></a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="reservation.html">Reservation</a></li>
          <li><a href="list.html">Farm List</a></li>
            <li><a href="myinfo.html">My info</a></li>
          <li><a href="login.html">Login</a></li>

        </ul>
      </div>
      <!--/.nav-collapse -->
    </div>
  </div>
    
      <!-- Side navbar -->
    <div id="sideEvtNav" style="top: 0px;">
        <div class="sen-inner">
            <div id="reservation">
                <br>
                <br>
                <a id="reserve" href="reservation.html">RESERVATION</a>
                <br>
                <br>
            </div>
            <div class="side-container">
                <ul>
                    <li><a target="_blank" href="./index.html">
                            <img src="./images/house-with-chimney.png" alt="Can not use the image now">
                        </a></li>
                    <li><a target="_blank" href="./index.html">
                            <img src="./images/vision.png" alt="Can not use the image now">
                        </a></li>
                    <li><a target="_blank" href="./index.html">
                            <img src="./images/multiple-images.png" alt="Can not use the image now">
                        </a></li>
                    <li><a target="_blank" href="./index.html">
                            <img src="./images/map.png" alt="Can not use the image now">
                        </a></li>
                    <li><a target="_blank" href="./index.html">
                            <img src="./images/play-button.png" alt="Can not use the image now">
                        </a></li>
                </ul>
            </div>
        </div>
    </div>
<!--------------------------------------------------------------- -->
    <div>
        <div class="search-container">
            <form>
                <input type="text" placeholder="Search Cabbage..." name="search">
                <button type="submit"><img src="images/search.png" /></button>
            </form>
        </div>
    
        <div class="item-container">
              <div class="serched_item_box">
                  <div class="searched_item_img">
                      <img src="images/cabbageFarm1.jpg" /> 
                  </div>
                  <div class="searched_item_info">
                      <div><b>Farm Name :</b> </div><div><span id="Fame_Name1"></span></div>
                      <div><b>Location :</b> </div><div><span id="Fame_location1"></span></div>
                      <div><b>Price :</b> </div><div><span id="Fame_Price1"></span></div>
                  </div>
                  <div class="quantity_bar">
                      <input id="buy_num_in_farm1" type="number" placeholder="0"/> 
                  </div>
            </div>
              <div class="serched_item_box">
                  <div class="searched_item_img">
                      <img src="images/cabbageFarm2.jpg" /> 
                  </div>
                  <div class="searched_item_info">
                      <div><b>Farm Name :</b></div> <div><span id="Fame_Name2"></span></div>
                      <div><b>Location :</b></div> <div> <span id="Fame_location2"></span></div>
                      <div><b>Price :</b></div> <div> <span id="Fame_Price2"></span></div>
                  </div>
                  <div class="quantity_bar">
                      <input id="buy_num_in_farm2" type="number" placeholder="0"/> 
                  </div>
            </div>
              <div class="serched_item_box">
                  <div class="searched_item_img">
                      <img src="images/cabbageFarm3.jpg" /> 
                  </div>
                  <div class="searched_item_info">
                      <div><b>Farm Name :</b> </div><div><span id="Fame_Name3"></span></div>
                      <div><b>Location :</b> </div><div><span id="Fame_location3"></span></div>
                      <div><b>Price :</b> </div><div><span id="Fame_Price3"></span></div>
                  </div>
                  <div class="quantity_bar">
                      <input id="buy_num_in_farm3" type="number" placeholder="0"/> 
                  </div>
            </div>

            <script>
                  $('.quantity_bar').each(function () {
	                   $(this).number();
                  });
            </script>
        </div>
         
        <div class="buy_container">
            <div id="buy_summary">
                <p>Total Quantity : </p><p><span id="totalQuantity"></span></p>
                <p>Total Price : </p><p><span id="totalPrice"></span></p> 
            </div>
            <form>
                <button type="submit" class="buy_button" onclick="myConfirm(); return false;"><b>CONFIRM</b>
                </button>
                <div>
                <a href="you_are_a_cabbage_friend.html"><div><b>BUY</b></div></a>
                </div>
            </form>
        </div>
        

        
        <!--------------item info reading from Firebase ----------------->
        <script>
            var out1 = document.getElementById("Fame_Name1");
            var fameName1Ref = firebase.database().ref().child("farms/Hwawon Farm/farmName");
            fameName1Ref.on("value", snap => out1.innerText = snap.val());
           
            var out2 = document.getElementById("Fame_Name2");
            var fameName2Ref = firebase.database().ref().child("farms/Samsan Farm/farmName");
            fameName2Ref.on("value", snap => out2.innerText = snap.val());
           
            var out3 = document.getElementById("Fame_Name3");
            var fameName3Ref = firebase.database().ref().child("farms/Songji Farm/farmName");
            fameName3Ref.on("value", snap => out3.innerText = snap.val());
            
            
            var out4 = document.getElementById("Fame_location1");
            var location1Ref = firebase.database().ref().child("farms/Hwawon Farm/location");
            location1Ref.on("value", snap => out4.innerText = snap.val());
            
            var out5 = document.getElementById("Fame_location2");
            var location2Ref = firebase.database().ref().child("farms/Samsan Farm/location");
            location2Ref.on("value", snap => out5.innerText = snap.val());
            
            var out6 = document.getElementById("Fame_location3");
            var location3Ref = firebase.database().ref().child("farms/Songji Farm/location");
            location3Ref.on("value", snap => out6.innerText = snap.val());
            
            
            var out7 = document.getElementById("Fame_Price1");
            var famePrice1Ref = firebase.database().ref().child("farms/Hwawon Farm/price");
            famePrice1Ref.on("value", snap => out7.innerText = snap.val() + ' KRW');
           
            var out8 = document.getElementById("Fame_Price2");
            var famePrice2Ref = firebase.database().ref().child("farms/Samsan Farm/price");
            famePrice2Ref.on("value", snap => out8.innerText = snap.val() + ' KRW');
            
            var out9 = document.getElementById("Fame_Price3");
            var famePrice3Ref = firebase.database().ref().child("farms/Songji Farm/price");
            famePrice3Ref.on("value", snap => out9.innerText = snap.val() + ' KRW' );
            
            
            var out10 = document.getElementById("totalQuantity");
            var TQRef = firebase.database().ref().child("AddedCount");
            TQRef.on("value", snap => out10.innerText = snap.val() );
            
            var out11 = document.getElementById("totalPrice");
            var TPRef = firebase.database().ref().child("TotalPrice");
            TPRef.on("value", snap => out11.innerText = snap.val() + ' KRW' );
        </script>
        
        <script>
            function myConfirm() {
                var totalQuant =  Number(document.getElementById('buy_num_in_farm1').value) + Number(document.getElementById('buy_num_in_farm2').value) + Number(document.getElementById('buy_num_in_farm3').value);
                document.getElementById("totalQuantity").innerHTML = totalQuant;
                
//                var dbref = firebase.database().ref("AddedCount");
//                dbref.setValue(totalQuant);
                
                
                var CalcRef = firebase.database().ref("/");

                CalcRef.update ({
                    AddedCount: totalQuant,
                    TotalPrice: Number(document.getElementById('buy_num_in_farm1').value)*700+ Number(document.getElementById('buy_num_in_farm2').value)*800 + Number(document.getElementById('buy_num_in_farm3').value)*860
                });
                
//                famePrice1Ref.on("value", snap => var price1 = snap.val() );
//                famePrice2Ref.on("value", snap => var price2 = snap.val() );
//                famePrice3Ref.on("value", snap => var price3 = snap.val() );
                
            }
       </script>

    
    
    </div>
<!--------------------------------------------------------------- -->
  <!-- /g -->

  <div id="copyrights">
    <div class="container">
      <p>
        &copy; Copyrights <strong>CabbageFriends</strong>. All Rights Reserved
      </p>
    </div>
  </div>
  <!-- / copyrights -->

  <!-- JavaScript Libraries -->
  <script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.min.js"></script>
  <script src="lib/php-mail-form/validate.js"></script>
<!--  <script src="lib/easing/easing.min.js"></script>-->

  <!-- Template Main Javascript File -->
  <script src="js/main.js"></script>
	

</body>
</html>
